{"version":3,"file":"DatahubDataTypeFloatValueEditor.vue_vue_type_script_setup_true_lang-BD1q7wcx.mjs","sources":["../../src/components/dataTypes/FloatValue/DatahubDataTypeFloatValueEditor.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, watch } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { ATextField } from \"@actindo/core-ui\";\nimport type {\n  IDatahubDataTypeEditorEmits,\n  IDatahubDataTypeEditorProps,\n} from \"@/components/dataTypes/models\";\nimport { useNumberValidation } from \"../validation\";\nimport type { IDataTypesFloatValueConfiguration } from \"./models\";\n\nconst props =\n  defineProps<\n    IDatahubDataTypeEditorProps<number, IDataTypesFloatValueConfiguration>\n  >();\n\nconst emit = defineEmits<IDatahubDataTypeEditorEmits>();\n\nconst localData = defineModel<number>();\n\nconst { t } = useI18n();\n\nconst errorMessages = ref(\"\");\n\nwatch(\n  () => props.modelValue,\n  (newValue: number | string) => {\n    const floatValue =\n      typeof newValue === \"string\"\n        ? parseFloat(newValue.replace(\",\", \".\"))\n        : newValue;\n\n    const { precision } = props.attribute.configuration;\n    if (precision && Number(newValue) === floatValue && floatValue % 1 !== 0) {\n      const precisionValue = Number(\n        `1e${props.attribute.configuration.precision}`,\n      );\n      localData.value =\n        Math.round(floatValue * precisionValue) / precisionValue;\n    }\n\n    const error = useNumberValidation(\n      floatValue,\n      props.attribute?.configuration,\n    );\n    errorMessages.value = error\n      ? t(error, {\n          min: props.attribute?.configuration?.min,\n          max: props.attribute?.configuration?.max,\n        })\n      : \"\";\n  },\n);\n\nwatch(errorMessages, (hasErrors) => {\n  emit(\"validated\", !hasErrors);\n});\n</script>\n\n<template>\n  <ATextField\n    v-model.number=\"localData\"\n    :readonly=\"readOnly\"\n    :label=\"massEditing ? undefined : label\"\n    :disabled=\"props.readOnly || props.attribute?.configuration?.readOnly\"\n    :error-messages=\"errorMessages\"\n  />\n</template>\n"],"names":[],"mappings":";;;;;;;AACA,MAAA,MAAA,OAAA,KAAA,EAAA;;AACA,MAAA,UAAA,OAAA,SAAA,EAAA;AACA,MAAA,aAAA,OAAA,eAAA,EAAA;;;;;;;;;;;;;;;;AAQA,UAAM,QACJ;AAIF,UAAM,OAAO;AAEP,UAAA,YAAY,UAAoB,SAAA,YAAA;AAEhC,UAAA,EAAE,MAAM;AAER,UAAA,gBAAgB,IAAI,EAAE;AAE5B;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,aAA8B;;AACvB,cAAA,aACJ,OAAO,aAAa,WAChB,WAAW,SAAS,QAAQ,KAAK,GAAG,CAAC,IACrC;AAEN,cAAM,EAAE,UAAc,IAAA,MAAM,UAAU;AACtC,YAAI,aAAa,OAAO,QAAQ,MAAM,cAAc,aAAa,MAAM,GAAG;AACxE,gBAAM,iBAAiB;AAAA,YACrB,KAAK,MAAM,UAAU,cAAc,SAAS;AAAA,UAAA;AAE9C,oBAAU,QACR,KAAK,MAAM,aAAa,cAAc,IAAI;AAAA,QAC9C;AAEA,cAAM,QAAQ;AAAA,UACZ;AAAA,WACA,WAAM,cAAN,mBAAiB;AAAA,QAAA;AAEL,sBAAA,QAAQ,QAClB,EAAE,OAAO;AAAA,UACP,MAAK,iBAAM,cAAN,mBAAiB,kBAAjB,mBAAgC;AAAA,UACrC,MAAK,iBAAM,cAAN,mBAAiB,kBAAjB,mBAAgC;AAAA,QACtC,CAAA,IACD;AAAA,MACN;AAAA,IAAA;AAGI,UAAA,eAAe,CAAC,cAAc;AAC7B,WAAA,aAAa,CAAC,SAAS;AAAA,IAAA,CAC7B;;;;;;;;;;;;;;;"}